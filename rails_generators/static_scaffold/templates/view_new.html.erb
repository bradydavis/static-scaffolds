<%% semantic_form_for <%=gen_spec.form_for_obj%> do |form| %>

<% for group in gen_spec.safe_form_groups -%>

<fieldset>
  <legend><%=group[:group_name]%></legend>
  <table>
	 <tr>
<% for attribute in group[:attributes] -%>
<%options=gen_spec.column_specs[attribute] -%>
   	<td valign="top"><%%= f.label <%= options[:label].inspect %> %></td>
<% case options[:type] -%>
<% when :file -%>
   	<td valign="top"><%%= f.file_field :<%= attribute %> %></td>
<% when :string -%>
    <td valign="top"><%%= f.text_field :<%= attribute %> %></td>
<% when :int -%>
    <td valign="top"><%%= f.text_field :<%= attribute %> %></td>
<% when :float -%>
    <td valign="top"><%%= f.text_field :<%= attribute %> %></td>
<% when :decimal -%>
    <td valign="top"><%%= f.text_field :<%= attribute %> %></td>
<% when :foreign_key -%>
    <td valign="top"><%%= collection_select(:<%=gen_spec.singular_name%>, :<%= attribute %>, @<%=gen_spec.belongs_to_name(attribute).pluralize%>, :id, :short_name, options = {:prompt => "- Select a <%=gen_spec.belongs_to_name(attribute).titleize.downcase%>"}, html_options = {}) %></td>
<% when :photo -%>
    <td valign="top"><%%= f.file_field :<%= attribute %> %></td>
<% when :datetime -%>
    <td valign="top"><%%= f.datetime_select :<%= attribute %>, :default=>DateTime.now %></td>
<% end -%>
  </tr>
<% end -%>
 </table>
</fieldset>
<% end -%>
<%% end %>

